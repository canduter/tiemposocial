/* automatically generated by JSCoverage - do not edit */
if (typeof _$jscoverage === 'undefined') _$jscoverage = {};
if (! _$jscoverage['twittersearcher.js']) {
  _$jscoverage['twittersearcher.js'] = [];
  _$jscoverage['twittersearcher.js'][1] = 0;
  _$jscoverage['twittersearcher.js'][2] = 0;
  _$jscoverage['twittersearcher.js'][3] = 0;
  _$jscoverage['twittersearcher.js'][4] = 0;
  _$jscoverage['twittersearcher.js'][7] = 0;
  _$jscoverage['twittersearcher.js'][8] = 0;
  _$jscoverage['twittersearcher.js'][9] = 0;
  _$jscoverage['twittersearcher.js'][10] = 0;
  _$jscoverage['twittersearcher.js'][13] = 0;
  _$jscoverage['twittersearcher.js'][16] = 0;
  _$jscoverage['twittersearcher.js'][18] = 0;
  _$jscoverage['twittersearcher.js'][19] = 0;
  _$jscoverage['twittersearcher.js'][23] = 0;
  _$jscoverage['twittersearcher.js'][25] = 0;
  _$jscoverage['twittersearcher.js'][26] = 0;
  _$jscoverage['twittersearcher.js'][30] = 0;
  _$jscoverage['twittersearcher.js'][31] = 0;
  _$jscoverage['twittersearcher.js'][35] = 0;
  _$jscoverage['twittersearcher.js'][36] = 0;
  _$jscoverage['twittersearcher.js'][39] = 0;
  _$jscoverage['twittersearcher.js'][41] = 0;
  _$jscoverage['twittersearcher.js'][42] = 0;
  _$jscoverage['twittersearcher.js'][43] = 0;
  _$jscoverage['twittersearcher.js'][44] = 0;
  _$jscoverage['twittersearcher.js'][48] = 0;
  _$jscoverage['twittersearcher.js'][50] = 0;
  _$jscoverage['twittersearcher.js'][58] = 0;
  _$jscoverage['twittersearcher.js'][60] = 0;
  _$jscoverage['twittersearcher.js'][61] = 0;
  _$jscoverage['twittersearcher.js'][62] = 0;
  _$jscoverage['twittersearcher.js'][63] = 0;
  _$jscoverage['twittersearcher.js'][64] = 0;
  _$jscoverage['twittersearcher.js'][65] = 0;
  _$jscoverage['twittersearcher.js'][66] = 0;
  _$jscoverage['twittersearcher.js'][67] = 0;
  _$jscoverage['twittersearcher.js'][72] = 0;
  _$jscoverage['twittersearcher.js'][79] = 0;
}
_$jscoverage['twittersearcher.js'][1]++;
var events = require("events");
_$jscoverage['twittersearcher.js'][2]++;
var http = require("http");
_$jscoverage['twittersearcher.js'][3]++;
var EventEmitter = require("events").EventEmitter;
_$jscoverage['twittersearcher.js'][4]++;
var Common = require("./common"), Tools = Common.tools;
_$jscoverage['twittersearcher.js'][7]++;
var TwitterSearcher = (function (config, socketManager) {
  _$jscoverage['twittersearcher.js'][8]++;
  EventEmitter.call(this);
  _$jscoverage['twittersearcher.js'][9]++;
  this.lastestTweet = 0;
  _$jscoverage['twittersearcher.js'][10]++;
  this.receiveTweets = Tools.bind(this.receiveTweets, this);
});
_$jscoverage['twittersearcher.js'][13]++;
TwitterSearcher.prototype = Object.create(EventEmitter.prototype);
_$jscoverage['twittersearcher.js'][16]++;
TwitterSearcher.prototype.searchByName = (function (placeName) {
  _$jscoverage['twittersearcher.js'][18]++;
  var query = this.prepareSearchQuery(placeName);
  _$jscoverage['twittersearcher.js'][19]++;
  this.search(query);
});
_$jscoverage['twittersearcher.js'][23]++;
TwitterSearcher.prototype.searchByLocation = (function (lat, lng) {
  _$jscoverage['twittersearcher.js'][25]++;
  var query = this.prepareSearchQueryWithGeo(lat, lng);
  _$jscoverage['twittersearcher.js'][26]++;
  this.search(query);
});
_$jscoverage['twittersearcher.js'][30]++;
TwitterSearcher.prototype.prepareSearchQuery = (function (placeName) {
  _$jscoverage['twittersearcher.js'][31]++;
  return escape(placeName + " " + Common.twitterSearchKeywords.join(" OR "));
});
_$jscoverage['twittersearcher.js'][35]++;
TwitterSearcher.prototype.prepareSearchQueryWithGeo = (function (lat, lng) {
  _$jscoverage['twittersearcher.js'][36]++;
  return escape(Common.twitterSearchKeywords.join(" OR ")) + "&geocode=" + lat + "," + lng + ",100km";
});
_$jscoverage['twittersearcher.js'][39]++;
TwitterSearcher.prototype.search = (function (query) {
  _$jscoverage['twittersearcher.js'][41]++;
  var self = this;
  _$jscoverage['twittersearcher.js'][42]++;
  var request = this.executeSearch(query);
  _$jscoverage['twittersearcher.js'][43]++;
  request.on("response", this.receiveTweets);
  _$jscoverage['twittersearcher.js'][44]++;
  request.end();
});
_$jscoverage['twittersearcher.js'][48]++;
TwitterSearcher.prototype.executeSearch = (function (query) {
  _$jscoverage['twittersearcher.js'][50]++;
  return http.request({host: "search.twitter.com", port: 80, method: "GET", path: "/search.json?since_id=" + this.latestTweet + "result_type=recent&rpp=4&q=" + query});
});
_$jscoverage['twittersearcher.js'][58]++;
TwitterSearcher.prototype.receiveTweets = (function (response) {
  _$jscoverage['twittersearcher.js'][60]++;
  var self = this;
  _$jscoverage['twittersearcher.js'][61]++;
  var body = "";
  _$jscoverage['twittersearcher.js'][62]++;
  response.on("data", (function (data) {
  _$jscoverage['twittersearcher.js'][63]++;
  body += data;
  _$jscoverage['twittersearcher.js'][64]++;
  try {
    _$jscoverage['twittersearcher.js'][65]++;
    var tweets = JSON.parse(body);
    _$jscoverage['twittersearcher.js'][66]++;
    if (tweets.results.length > 0) {
      _$jscoverage['twittersearcher.js'][67]++;
      self.emit("tweets", tweets.results);
    }
  }
  catch (ex) {
    _$jscoverage['twittersearcher.js'][72]++;
    console.log("waiting for more data chunks..." + ex);
  }
}));
});
_$jscoverage['twittersearcher.js'][79]++;
module.exports = TwitterSearcher;
_$jscoverage['twittersearcher.js'].source = ["var events=require(\"events\");","var http = require(\"http\");","var EventEmitter = require('events').EventEmitter;","var Common = require('./common'),","\tTools = Common.tools;","","var TwitterSearcher = function(config, socketManager){","\tEventEmitter.call(this);","\tthis.lastestTweet = 0;","\tthis.receiveTweets = Tools.bind(this.receiveTweets, this);","}","","TwitterSearcher.prototype = Object.create(EventEmitter.prototype);","","","TwitterSearcher.prototype.searchByName = function(placeName)","{\t","\tvar query = this.prepareSearchQuery(placeName);","\tthis.search(query);\t","}","","","TwitterSearcher.prototype.searchByLocation = function(lat, lng)","{","\tvar query = this.prepareSearchQueryWithGeo(lat,lng);","\tthis.search(query);\t","}","","","TwitterSearcher.prototype.prepareSearchQuery = function(placeName){","\treturn escape(placeName + ' ' + Common.twitterSearchKeywords.join(' OR '));","}","","","TwitterSearcher.prototype.prepareSearchQueryWithGeo = function(lat, lng){","\treturn escape(Common.twitterSearchKeywords.join(' OR ')) + '&amp;geocode=' + lat + ',' + lng + ',100km';","}","","TwitterSearcher.prototype.search = function(query)","{","\tvar self = this;\t\t","\tvar request = this.executeSearch(query);","\trequest.on(\"response\", this.receiveTweets);","\trequest.end();\t","}","","","TwitterSearcher.prototype.executeSearch = function(query)","{","\treturn http.request({","\t\thost: \"search.twitter.com\",","\t\tport: 80,","\t\tmethod: \"GET\",","\t\tpath: \"/search.json?since_id=\" + this.latestTweet + \"result_type=recent&amp;rpp=4&amp;q=\" + query","\t});","}","","TwitterSearcher.prototype.receiveTweets = function(response)","{","\tvar self = this;","\tvar body = \"\";","\tresponse.on(\"data\", function(data){","\t\tbody += data;\t\t\t\t\t","\t\ttry {","\t\t\tvar tweets = JSON.parse(body);","\t\t\tif (tweets.results.length &gt; 0) {","\t\t\t\tself.emit(\"tweets\", tweets.results);","\t\t\t}\t\t\t\t","\t\t\t//self.removeAllListeners(\"tweets\");","\t\t} ","\t\tcatch (ex) {","\t\t\tconsole.log(\"waiting for more data chunks...\" + ex);","\t\t}","\t});","}","","","","module.exports = TwitterSearcher;"];
